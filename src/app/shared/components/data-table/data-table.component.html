<div class="overflow-x-auto scrollbar-custom">
  <table mat-table [dataSource]="dataSource" class="table w-full">
    <!-- COLUNAS -->
    @for (column of displayedColumns; track column) {
      <ng-container [matColumnDef]="column">
        <th mat-header-cell *matHeaderCellDef>
          {{ columnLabels[column] }}
        </th>

        <td mat-cell *matCellDef="let row">
          {{ formatCell(column, row) }}
        </td>
      </ng-container>
    }

    <!-- AÇÕES -->
    @if (showActions) {
      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Ações</th>

        <td mat-cell *matCellDef="let row">
          <div class="flex gap-1">
            @if (actions?.view) {
              <button
                mat-icon-button
                matTooltip="Visualizar"
                aria-label="Visualizar"
                (click)="actions?.view(row)"
              >
                <mat-icon class="action-icons">visibility</mat-icon>
              </button>
            }

            @if (actions?.edit) {
              <button
                mat-icon-button
                matTooltip="Editar"
                aria-label="Editar"
                (click)="actions?.edit(row)"
              >
                <mat-icon class="action-icons">edit</mat-icon>
              </button>
            }

            @if (actions?.delete) {
              <button
                mat-icon-button
                matTooltip="Excluir"
                aria-label="Excluir"
                (click)="actions?.delete(row)"
              >
                <mat-icon class="action-icons">delete</mat-icon>
              </button>
            }
          </div>
        </td>
      </ng-container>
    }

    <tr mat-header-row *matHeaderRowDef="allColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: allColumns"></tr>
  </table>
</div>

<mat-paginator
  [pageSizeOptions]="[5, 10, 20]"
  showFirstLastButtons
  class="mt-2"
></mat-paginator>
